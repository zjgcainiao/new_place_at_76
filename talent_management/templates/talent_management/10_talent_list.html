{% extends 'talent_management/00_base.html' %}
{% block content-main %}
<div class ='container container-fluid'>
  <!-- display messages generated by Django -->
  <div class ='row my-1'>  
      <div class="col-md-12">
        {% if messages %}
          {% for message in messages %}
        
          <li{% if message.tags %} class="alert alert-dismissible alert-{{ message.tags }}"{% endif %}>
            {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}Important: {% endif %}
            {{ message }}
          </li>
          
          {% endfor %}
        {% endif %}
      </div>
  </div>
  <!-- end of display messages  -->
  <div class="row">
      <div class="col">
          <!-- Breadcrumb-->
          <nav aria-label="breadcrumb mb-0">
              <ol class="breadcrumb breadcrumb-dark mb-0">
                  <li class="breadcrumb-item"><a href="{% url 'homepageapp:homepage' %}">Homepage</a></li>
                  <li class="breadcrumb-item">Talent Dash</a></li>
              </ol>
          </nav>
      </div>

  </div>
  <h2>Talent Management Dash</h2>

  <div class='row'>
    <p>User: {{user.user_first_name}}. User Auth Group: {{user.user_auth_group}}-{{user.get_user_auth_group_display}}. User has_perm Status{{user.has_perm}}</p>
  </div>
  <div class ='row'>
    <form method="GET" action="{% url 'talent_management:talent_list' %}">
      <div class="input-group">
          <input type="search" class="form-control dropdown-toggle" name="q" placeholder="Search by first name, last name, email or phone number" id="talent-search" value="{{ request.GET.q}}">
          <button class="input-group-text btn btn-primary" type="submit"><span class="mdi mdi-magnify search-icon"></span>Search Record</button>
      </div>
    </form>
  </div>
  <!-- <div class="row my-1">
    <div class="col-md-6">
      <form method="GET">
        <div class="form-group">
          <label for="search">Search:</label>
          <input type="text" class="form-control" id="search" name="search" value="{{ request.GET.search }}">
        </div>
      </form>
      <button type="submit" class="btn btn-primary">Filter</button>
    </div>
  </div> -->

  <div class='row'>
    <div class="col my-1">
      <a type="button" class="btn btn-outline-dark" href="{% url 'talent_management:talent_creation_view' %}"> <i class="uil-focus-add"></i> Create Talent Record</a>
    </div>
  </div>


  <div class ='row'>
    <div class ='card'>
      <h5>This is the sample long-processing report. click the submit button to manually trigger the report process. intended for celery beats.</h5>
      <div class="col col-4">
        <form method="POST" action ="{% url 'talent_management:sending_long_processing_report' %}">
          {% csrf_token %}
          <button class='btn btn-outline-light' type="submit"> Submit
          </button>
        </form>
      </div>
    </div>
  </div>

</div>
<!-- end of container -->

<div class ='container container-fluid'>
  <div class ='row'>
    <div class="col-md-12">
      <table class="table table-hover">
        <thead>
          <tr>
            <th> TalentID 
              <br><small>(not employee ID)</small>
            </th>
            <th>FullName</th>
            <th>FullAddress</th>
            <th>PhoneNumber</th>
            <th>Email</th>
            <th>UpdatedAt</th>
          </tr>
        </thead>
        <tbody>
          {% for talent in talent_list %}
            <tr>
              <td><a href="{% url 'talent_management:talent_detail' pk=talent.talent_id  %}">{{ talent.talent_id }}</a></td>
              <td>{{ talent.talent_full_name }}</td>
              <td>{{ talent.talent_full_address }}</td>
              <td>{{ talent.talent_phone_number_primary }}</td>
              <td>{{ talent.talent_email }}</td>
              <td>{{talent.talent_last_udpated_date}}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="5">No talents found.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

</div>

<!-- Add pagination links if required -->
{% if is_paginated %}
    <div class="pagination">
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
            {% endif %}

            <span class="current-page">{{ page_obj.number }}</span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">next</a>
            {% endif %}
        </span>
    </div>
{% endif %}
{% endblock %}